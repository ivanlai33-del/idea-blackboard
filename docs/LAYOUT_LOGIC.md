# Lumos AI: 看板欄位佈局邏輯 (Board Layout Logic)

本文定義了 Lumos AI 看板中欄位（Columns/Categories）的排列規則與網格響應式邏輯。

---

## 📐 1. 網格排列規則 (Grid Rules)

系統採用 **CSS Grid** 作為核心佈局引擎，根據螢幕寬度與欄位數量動態調整顯示方式。

### A. 響應式斷點 (Responsive Breakpoints)
| 裝置類型 | 寬度範圍 | 每列顯示欄位數 | Tailwind Class |
| :--- | :--- | :--- | :--- |
| **手機 (Mobile)** | < 768px | 1 欄 | `grid-cols-1` |
| **平版 (Tablet)** | 768px - 1024px | 2 欄 | `md:grid-cols-2` |
| **桌面 (Desktop)** | 1024px - 1280px | 3 欄 | `lg:grid-cols-3` |
| **寬螢幕 (XL Desktop)** | > 1280px | 4 欄 | `xl:grid-cols-4` |

### B. 數量導向微調 (Quantity-Based Tuning)
*   **欄位上限**：單一白板內最高同時存在 **9 個欄位**。
*   **矩陣配置規則**：
    *   **3x3 模式**：當欄位數為 9 時，於桌面端優先採用 3 欄並列，形成 3 寬 x 3 高的整齊矩陣。
    *   **4x2 模式**：在寬螢幕下，若欄位數為 8 時，優先採用 4 欄並列，形成 4 寬 x 2 高的橫向矩陣。
*   **超過 4 欄時**：預設進入「多列模式」，超出 xl 斷點的欄位將自動折行。
*   **新增按鈕**：已移至頂部工具列「智能報告」按鈕右側，網格內不再保留佔位槽位。當欄位達到 9 個上限時，工具列按鈕將轉為停用或提示升級狀態。

---

## 🔄 2. 排序與新增邏輯 (Ordering Logic)

1.  **時間戳排序**：預設情況下，新建立的欄位 (`Category`) 會根據 `id` 或建立時間追加到列表末尾。
2.  **拖曳排序 (DnD)**：
    *   使用 `rectSortingStrategy` 進行二維網格排序。
    *   拖曳結束後，系統會更新 `BoardContext` 中的 `categories` 陣列順序並持久化至 `localStorage`。
3.  **重心填充與零捲動規則 (Zero-Scroll Rule)**：
    *   **主視窗零捲動**：當欄位數量 ≤ 9 時，主內容容器強制使用 `overflow-hidden`。
    *   **自適應高度與比例**：欄位高度統一使用 `h-full`，配合網格的 `auto-rows-fr` 屬性，確保不論內容多寡，各行各列的比例與尺寸完全對稱且一致。
    *   **內部捲動**：若個別欄位內容過長，僅在欄位內部產生捲動軌，主畫面始終保持穩定。

---

## 🎨 3. 視覺一致性規則 (Visual Consistency)

*   **間距 (Gap)**：統一使用 `gap-6` (24px)，保持呼吸感。
*   **內邊距 (Padding)**：容器四周預留 `p-6`，確保與側邊欄及導航欄有足夠間隙。
*   **對齊 (Alignment)**：
    *   文字標題靠左對齊。
    *   操作按鈕（如新增卡片）固定於欄位頂部或底部。

---

> **存檔位置**: `docs/LAYOUT_LOGIC.md`
> **最後更新**: 2026-02-04
